<!DOCTYPE html>
<html lang="zh-cn">

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

		<title>æŠ½è±¡è¯ç”Ÿæˆå™¨</title>

		<meta name="description" content="ä¸€é”®ç”ŸæˆæŠ½è±¡è¯">
		<meta name="author" content="chenxuuu">
		<!-- <script src="js/jquery.min.js"></script> -->
		<link rel="stylesheet" href="https://bootswatch.com/_vendor/bootstrap/dist/css/bootstrap.min.css">
		<link id="css" data-theme="bootstrap" rel="stylesheet" crossorigin="anonymous">
		<!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->
		<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
		<script type="text/javascript" src="js/cxh-data.js"></script>
		<script type="text/javascript" src="js/cxh.js"></script>
		<script src="https://cdn.staticfile.org/jquery/3.6.0/jquery.min.js"></script>
		<script src="https://cdn.staticfile.org/twitter-bootstrap/5.0.2/js/bootstrap.bundle.min.js"></script>
		<script type="text/javascript" src="js/grapheme-splitter.min.js"></script>
		<link rel="stylesheet" href="/basis/css/bootstrap-init.css">
		<style>
			textarea.form-control {
				height: 38px;
				min-height: 38px;
				transition: box-shadow 250ms ease, background-color 250ms ease, color 250ms ease !important;
				vertical-align: middle;
			}
			html, body {
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, 'Noto Sans', 'San Francisco', å¾®è½¯é›…é»‘, æ€æºé»‘ä½“, è‹¹æ–¹, 'ç­‰è·æ›´çº±é»‘ä½“ SC', sans-serif;
				scroll-behavior: smooth;
			}
			.sm {
				border: none;
				height: 24px;
				padding: 0 3px;
				margin-bottom: 4px;
				float: right;
			}
			
			label {
				margin-bottom: .5rem;
			}
		</style>
	</head>

	<body>

		<nav style="display:none" class="navbar navbar-expand-lg navbar-light bg-light">
			<a class="navbar-brand" style="cursor:default;"><img unused-src="../caption-logo.svg" width="30" height="30" alt="" loading="lazy"></a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
			 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item">
						<a class="nav-link" href="../option.html">ä¸»é¡µ</a>
					</li>
					<li class="nav-item active">
						<a class="nav-link" href="javascript:void(0);">æŠ½è±¡è¯ç”Ÿæˆå™¨<span class="sr-only">ï¼ˆå½“å‰ï¼‰</span></a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="pyfmt.html">æ‹¼éŸ³æ ¼å¼åŒ–</a>
					</li>
				</ul>
				<span class="navbar-text" style="font-size:75%">
					Powered by Bootstrap
				</span>
			</div>
		</nav>

		<div class="container-fluid">
			<br />
			<div class="row">
				<div class="col-sm-8">
					<h1>æŠ½è±¡è¯ç”Ÿæˆå™¨</h1>
					<h6>ä¸€é”®ç”ŸæˆæŠ½è±¡è¯</h6>
				</div>
				<div class="col-sm-4">
					<div class="alert alert-warning alert-dismissable">
						<div>
							<h4>æ¸©é¦¨æç¤ºï¼š</h4>
							<p>ç”Ÿæˆæ—¶è¯·æ³¨æ„æ¸©æ–‡å„’é›…ã€‚<p>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-8">
					<div class="mb-3">
						<label for="rawText" data-bs-toggle="tooltip" data-bs-placement="left" title="ç›®å‰ä»…æ”¯æŒè½¬æ¢ä¸­æ–‡">
							è¦è½¬æ¢çš„è¯­å¥
						</label>
						<button class="btn btn-outline-secondary btn-sm sm" type="button" onclick="resetText(0)" title="é‡è®¾" data-bs-toggle="tooltip">
							<i class="fa fa-times fa-fw"></i>
						</button>
						<textarea type="text" class="form-control" id="rawText" autofocus placeholder="è¾“å…¥ä½ è¦è½¬æ¢çš„è¯­å¥"></textarea>
					</div>
					<div class="d-grid"><button class="btn btn-primary btn-block mb-3" onclick="getResult()" id="create">
						ç”ŸæˆæŠ½è±¡è¯
					</button></div>
					<div class="mb-3">
						<label for="resultText">
							è½¬æ¢ç»“æœ
						</label>
						<textarea type="text" class="form-control" id="resultText"></textarea>
					</div>
					<div class="d-grid"><button class="btn btn-secondary btn-block" id="d_clip_button" data-clipboard-target="#resultText" data-bs-toggle="tooltip"
					 data-bs-placement="bottom" title="å¤åˆ¶åˆ°å‰ªè´´æ¿">
						å¤åˆ¶ç»“æœ
					</button></div>
					<br />
				</div>
				<div class="col-lg-4">
					<div class="mb-3">
						<label for="chouxiangText" data-bs-toggle="tooltip" data-bs-placement="left" title="åªæ”¯æŒè¿˜åŸæœ¬å·¥å…·è½¬æ¢çš„ç»“æœ">
							<span class="text-danger" style="margin-right:0.5em">æ–°åŠŸèƒ½</span>è¿˜åŸæŠ½è±¡è¯åˆ°æ‹¼éŸ³
						</label>
						<button class="btn btn-outline-secondary btn-sm sm" type="button" onclick="resetText(1)" title="é‡è®¾" data-bs-toggle="tooltip">
							<i class="fa fa-times fa-fw"></i>
						</button>
						<button class="btn btn-outline-secondary btn-sm sm" type="button" id="pasteText" id="paste-button" title="ç²˜è´´<br />ï¼ˆæµè§ˆå™¨å¯èƒ½ä¼šå¼¹å‡ºå‰ªè´´æ¿è¯»å–è¯·æ±‚ï¼Œè¯·ç‚¹å‡»å…è®¸ï¼‰" data-toggle="tooltip" data-html="true">
							<i class="fa fa-paste fa-fw"></i>
						</button>
						<textarea type="text" class="form-control" id="chouxiangText" placeholder="æ­¤å¤„ç²˜è´´ä½ è¦è¿˜åŸçš„ç»˜æ–‡å­—"></textarea>
					</div>
					<div class="d-grid"><button class="btn btn-primary btn-block" onclick="retrenResult()">
						è¿˜åŸæŠ½è±¡è¯åˆ°æ‹¼éŸ³
					</button></div>
				</div>
			</div>
			<br />
			<p class="footer form-text text-muted mb-3" style="font-size:90%">æºç æ¥è‡ª å®‡éœ²ç½‘</p>
		</div>

		<script>
			$(document).ready(function() {
				$('[data-bs-toggle="tooltip"]').tooltip();
			});
			$("#create").attr({"disabled": "disabled"});
			$("#create").text("åŠ è½½ä¸­ï¼Œè¯·ç¨å€™â€¦â€¦");

			const vs16 = '\ufe0f';
			var addEmojiVS = text => Array.from(text).join(vs16) + vs16;
			var removeEmojiVS = text => text.replaceAll(vs16, '');

			function getResult() {
				if (document.getElementById('rawText').value == "") {
					// document.getElementById("resultText").value = "ğŸ‘‡ğŸˆ¹ğŸŒ¶é‡Œè½¬ğŸˆ³7âƒ£å‘¢Â¿æ•²ğŸ”ğŸˆ¹å­—8âƒ£â•";
					document.getElementById("resultText").value = "ğŸ‘‡ğŸˆ¹ğŸŒ¶é‡Œè½¬ğŸˆ³7âƒ£å‘¢Â¿æ•²ğŸ”ğŸˆ¹å­—8âƒ£â•";
				} else {
					document.getElementById("resultText").value = "ç”Ÿæˆä¸­ï¼Œè¯·ç¨å€™â€¦â€¦";
					document.getElementById("resultText").value = addEmojiVS(chouxiang(document.getElementById('rawText').value));
				}
			}

			function retrenResult() {
				if (document.getElementById('chouxiangText').value == "") {
					document.getElementById("resultText").value = "ä½ æé‚£é‡Œè½¬ç©ºæ°”å‘¢ï¼Ÿæ•²å‡ ä¸ªå­—å§ï¼";
				} else {
					document.getElementById("resultText").value = "è¿˜åŸä¸­ï¼Œè¯·ç¨å€™â€¦â€¦";
					document.getElementById("resultText").value = dechouxiang(removeEmojiVS(document.getElementById('chouxiangText').value));
				}
			}
		</script>
		<script type="text/javascript" src="js/clipboard.min.js"></script>
		<script type="text/javascript" src="js/cxh.js"></script>
		<script type="text/javascript" src="js/grapheme-splitter.js"></script>
		<script>
			var btn = document.getElementById('d_clip_button');
			var clipboard = new ClipboardJS(btn);
			clipboard.on('success', function() {
				clipboardReact("å¤åˆ¶æˆåŠŸ~");
			});
			clipboard.on('error', function() {
				clipboardReact("å¤åˆ¶å¤±è´¥äº†å‘¢ï¼Œä½ è¿˜æ˜¯æ‰‹åŠ¨å¤åˆ¶å§â€¦â€¦");
			});

			function clipboardReact(title) {
				var clipbtn = $("#d_clip_button");
				clipbtn.focus();
				clipbtn.attr('title', title).tooltip('_fixTitle').tooltip('show');
				setTimeout(function() {
					clipbtn.attr('title', "å¤åˆ¶åˆ°å‰ªè´´æ¿").tooltip('_fixTitle');
					clipbtn.mouseout(function() {
						clipbtn.tooltip('hide');
					});
				}, 500);
			}
			
			$('textarea').each(function () {
			  this.setAttribute('style', 'height:' + (this.scrollHeight) + 'px;overflow-y:hidden;');
			}).on('input', textarea_resize);
			function textarea_resize() {
				$('textarea').each(function () {
					this.style.height = '38px';
					this.style.height = (this.scrollHeight) + 'px';
				});
			}
			
			function resetText(num) {
				var txt2=["#rawText","#chouxiangText"];
				$(txt2[num]).val("");
				$(txt2[num]).select();
				textarea_resize();
			}
			// function pasteText() {
				/* $("#chouxiangText").val("");
				$("#chouxiangText").select();
				$("#chouxiangText").val(Window.clipboardData.getData("Text"));
				$("#chouxiangText").blur(); */
				/* navigator.permissions.query({
				  name: 'clipboard-read'
				}).then(permissionStatus => {
				  // Will be 'granted', 'denied' or 'prompt':
				  console.log(permissionStatus.state);
				
				  // Listen for changes to the permission state
				  permissionStatus.onchange = () => {
				    console.log(permissionStatus.state);
				  };
				});
				console.log(navigator.clipboard.readText()); */
				/* async (e) => {
					$("#chouxiangText").focus();
					const text = navigator.clipboard.readText();
					console.log(text);
					$("#chouxiangText").val(text);
				} */
			// }
			document.getElementById("pasteText").addEventListener('click', async (e) => {
				$("#chouxiangText").focus();
				try {
					const text = await navigator.clipboard.readText();
					console.log('Pasted content: ', text);
					$("#chouxiangText").val(text);
				} catch (err) {
					console.error('Failed to read clipboard contents: ', err);
				}
			});
		</script>
		<script src="/basis/NightTime.js"></script>
	</body>
</html>
